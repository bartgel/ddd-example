import{j as e}from"./jsx-runtime.DCqPeNwG.js";import{R,r as l}from"./index.66AI1_x2.js";import{a as L}from"./url-builder.Ci7yX7Vs.js";import{E as W}from"./external-link.Cc5NOFPQ.js";import{F,a as O}from"./ChevronDoubleUpIcon.DkPV3ioI.js";import"./_commonjsHelpers.Cpj98o6Y.js";import"./createLucideIcon.BukmfUhN.js";const A=({item:t,currentPath:g,parentId:b,itemIndex:C,collapsedGroups:c,toggleGroupCollapse:y})=>{const x=t.items&&t.items.length>0,u=`${b}-${C}`;if(x&&t.items)return e.jsxs("div",{className:"py-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded-md flex-shrink-0",onClick:o=>{o.stopPropagation(),y(`nested-${u}`)},children:e.jsx("div",{className:`transition-transform duration-150 ${c[`nested-${u}`]?"":"rotate-180"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon",className:"h-3 w-3 text-gray-500",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})})}),e.jsxs("button",{className:"flex items-center px-2 py-1 text-xs font-medium text-gray-700 rounded-md hover:bg-purple-50 min-w-0 flex-1",onClick:o=>{o.stopPropagation(),y(`nested-${u}`)},children:[e.jsx("span",{className:"truncate",children:t.label}),t.badge&&t?.badge?.text&&e.jsx("span",{className:`text-${t.badge.color||"purple"}-600 ml-2 text-[10px] font-medium bg-${t.badge.color||"purple"}-50 px-2 py-0.5 rounded uppercase`,children:t.badge.text})]})]}),e.jsx("div",{className:`overflow-hidden transition-[height] duration-150 ease-out ${c[`nested-${u}`]?"h-0":"h-auto"}`,children:e.jsx("div",{className:"space-y-0.5 border-gray-200/80 border-l pl-4 ml-[9px] mt-1",children:t.items.map((o,d)=>e.jsx(A,{item:o,currentPath:g,parentId:u,itemIndex:d,collapsedGroups:c,toggleGroupCollapse:y},`nested-${u}-${d}`))})})]});let m=t.slug?L(`/docs/custom/${t.slug}`):"#";const j=g===m||g.endsWith(`/${t.slug}`),i=t.attrs?{...t.attrs,style:typeof t.attrs.style=="string"?t.attrs.style.split(";").filter(o=>o.trim()).reduce((o,d)=>{const[N,k]=d.split(":").map(f=>f.trim()),w=N.replace(/-([a-z])/g,f=>f[1].toUpperCase());return{...o,[w]:k}},{}):t.attrs.style}:null,p=t.slug?.startsWith("http");return p&&t.slug&&(m=t.slug),e.jsxs("a",{href:m,...i||{},className:`flex items-center px-2 py-1.5 text-xs ${j?"bg-purple-100 text-purple-900 font-medium":"text-gray-600 hover:bg-purple-100"} rounded-md`,"data-active":j,target:p?"_blank":void 0,children:[e.jsxs("span",{className:"truncate flex items-center gap-1.5",children:[t.label,p&&e.jsx(W,{className:"w-3 -mt-0.5 h-3"})]}),t.badge&&t?.badge?.text&&e.jsx("span",{className:`text-${t.badge.color||"purple"}-600 ml-2 text-[10px] font-medium bg-${t.badge.color||"purple"}-50 px-2 py-0.5 rounded uppercase`,children:t.badge.text})]})},U=R.memo(A),z=({searchTerm:t})=>e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsxs("div",{className:"text-gray-400 text-sm mb-2",children:['No results found for "',t,'"']}),e.jsxs("div",{className:"text-gray-400 text-xs",children:["Try:",e.jsxs("ul",{className:"mt-2 space-y-1 text-left list-disc pl-4",children:[e.jsx("li",{children:"Checking for typos"}),e.jsx("li",{children:"Using fewer keywords"}),e.jsx("li",{children:"Using more general terms"})]})]})]}),B=R.memo(z),I="EventCatalog:customDocsSidebarCollapsedGroups",P=300,_=({sidebarItems:t})=>{const g=l.useRef(null),[b,C]=l.useState(""),[c,y]=l.useState(""),[x,u]=l.useState(!1),[m,j]=l.useState(!0),[i,p]=l.useState(()=>{if(typeof window<"u"){const s=window.localStorage.getItem(I);return u(!0),s?JSON.parse(s):{}}return{}}),o=window.location.pathname;l.useEffect(()=>{const s=setTimeout(()=>{y(b.toLowerCase())},P);return()=>clearTimeout(s)},[b]);const d=l.useMemo(()=>{if(!c)return t;const s=r=>r.toLowerCase().includes(c),a=r=>s(r.label)?!0:r.items&&r.items.length>0?r.items.some(a):!1;return t.map(r=>{if(!r.items)return s(r.label)?r:null;const n=r.items.filter(a);return n.length>0||s(r.label)?{...r,items:n}:null}).filter(Boolean)},[t,c]);l.useEffect(()=>{if(c){const s={...i};Object.keys(s).forEach(a=>{s[a]=!1}),p(s)}},[c]),l.useEffect(()=>{typeof window<"u"&&x&&window.localStorage.setItem(I,JSON.stringify(i))},[i,x]),l.useEffect(()=>{if(x&&t&&t.length>0){const s={...i};t.forEach((a,r)=>{const n=`section-${r}`;a.collapsed!==void 0&&s[n]===void 0&&(s[n]=a.collapsed)}),p(s)}},[t,x]),l.useEffect(()=>{const s=document.querySelector('[data-active="true"]');s&&setTimeout(()=>{s.scrollIntoView({behavior:"smooth",block:"center"})},300)},[]);const N=l.useCallback(s=>{p(a=>({...a,[s]:!a[s]}))},[]),k=l.useCallback(s=>{C(s.target.value)},[]),w=l.useCallback(()=>{const s={};d.forEach((a,r)=>{const n=`section-${r}`;s[n]=!0;const v=(E,S)=>{E.forEach((h,T)=>{if(h.items&&h.items.length>0){const $=`${S}-${T}`;s[$]=!0,v(h.items,$)}})};a.items&&v(a.items,n)}),p(s),j(!1)},[d]),f=l.useCallback(()=>{const s={};d.forEach((a,r)=>{const n=`section-${r}`;s[n]=!1;const v=(E,S)=>{E.forEach((h,T)=>{if(h.items&&h.items.length>0){const $=`${S}-${T}`;s[$]=!1,v(h.items,$)}})};a.items&&v(a.items,n)}),p(s),j(!0)},[d]),D=l.useCallback(()=>{m?w():f()},[m,w,f]);if(!x)return null;const K=c&&d.length===0;return e.jsxs("nav",{ref:g,className:"h-full text-gray-800 pt-4 overflow-y-auto",children:[e.jsx("div",{className:"mb-2 px-3 bg-white z-10",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:k,placeholder:"Quick search...",className:"flex-1 p-2 px-2 text-sm rounded-md border border-gray-200 h-[30px]"}),e.jsx("button",{onClick:D,title:m?"Collapse All":"Expand All",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-md border border-gray-200 h-[30px] flex items-center justify-center",children:m?e.jsx(F,{className:"h-4 w-4 text-gray-600"}):e.jsx(O,{className:"h-4 w-4 text-gray-600"})})]})}),e.jsx("div",{className:"space-y-2 divide-y divide-gray-100/40 pb-4",children:K?e.jsx(B,{searchTerm:c}):d.map((s,a)=>e.jsx("div",{className:"pt-2 pb-2 px-3",children:e.jsxs("div",{className:"space-y-0","data-section":`section-${a}`,children:[s.items?e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded-md flex-shrink-0",onClick:r=>{r.stopPropagation(),N(`section-${a}`)},children:e.jsx("div",{className:`transition-transform duration-150 ${i[`section-${a}`]?"":"rotate-180"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon",className:"h-3 w-3 text-gray-500",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})})}),e.jsxs("button",{className:"flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md hover:bg-purple-50 min-w-0 flex-1",onClick:r=>{r.stopPropagation(),N(`section-${a}`)},children:[e.jsx("span",{className:"truncate",children:s.label}),s.badge&&s?.badge?.text&&e.jsx("span",{className:`text-${s.badge.color||"purple"}-600 ml-2 text-[10px] font-medium bg-${s.badge.color||"purple"}-50 px-2 py-0.5 rounded uppercase`,children:s.badge.text})]})]}):e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"flex-grow flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md",children:[e.jsx("span",{className:"truncate",children:s.label}),e.jsx("span",{className:"text-purple-600 ml-2 text-[10px] font-medium bg-purple-50 px-2 py-0.5 rounded uppercase",children:"Section"})]})}),s.items&&e.jsx("div",{className:`overflow-hidden transition-[height] duration-150 ease-out ${i[`section-${a}`]?"h-0":"h-auto"}`,children:e.jsx("div",{className:"space-y-0.5 border-gray-200/80 border-l pl-4 ml-[9px] mt-1",children:s.items.map((r,n)=>e.jsx(U,{item:r,currentPath:o,parentId:`${a}`,itemIndex:n,collapsedGroups:i,toggleGroupCollapse:N},`item-${a}-${n}`))})}),s.slug&&!s.items&&e.jsx("a",{href:L(`/docs/custom/${s.slug}`),className:`flex items-center px-2 py-1.5 text-xs ${o.endsWith(`/${s.slug}`)?"bg-purple-100 text-purple-900 font-medium":"text-gray-600 hover:bg-purple-100"} rounded-md ml-6`,"data-active":o.endsWith(`/${s.slug}`),children:e.jsx("span",{className:"truncate",children:s.label})})]})},`section-${a}`))})]})},J=R.memo(_);function X(t){return e.jsx(J,{...t})}export{X as default};
