import{i as y}from"./transform.BcRQlmJM.js";import{i as b}from"./value.CGfebIco.js";import{i as A}from"./init.Gi6I4Gst.js";import{e as M,f as R,a as q,b as F}from"./defaultLocale.C4B-KCzX.js";function S(n,t){return n=+n,t=+t,function(r){return Math.round(n*(1-r)+t*r)}}function g(n,t){return null==n||null==t?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function z(n,t){return null==n||null==t?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function w(n){let t,r,e;function a(n,e,a=0,u=n.length){if(a<u){if(0!==t(e,e))return u;do{const t=a+u>>>1;r(n[t],e)<0?a=t+1:u=t}while(a<u)}return a}return 2!==n.length?(t=g,r=(t,r)=>g(n(t),r),e=(t,r)=>n(t)-r):(t=n===g||n===z?n:I,r=n,e=n),{left:a,center:function(n,t,r=0,u=n.length){const o=a(n,t,r,u-1);return o>r&&e(n[o-1],t)>-e(n[o],t)?o-1:o},right:function(n,e,a=0,u=n.length){if(a<u){if(0!==t(e,e))return u;do{const t=a+u>>>1;r(n[t],e)<=0?a=t+1:u=t}while(a<u)}return a}}}function I(){return 0}function P(n){return null===n?NaN:+n}const $=w(g),j=$.right;w(P).center;const x=Math.sqrt(50),B=Math.sqrt(10),C=Math.sqrt(2);function v(n,t,r){const e=(t-n)/Math.max(0,r),a=Math.floor(Math.log10(e)),u=e/Math.pow(10,a),o=u>=x?10:u>=B?5:u>=C?2:1;let i,c,f;return a<0?(f=Math.pow(10,-a)/o,i=Math.round(n*f),c=Math.round(t*f),i/f<n&&++i,c/f>t&&--c,f=-f):(f=Math.pow(10,a)*o,i=Math.round(n/f),c=Math.round(t/f),i*f<n&&++i,c*f>t&&--c),c<i&&.5<=r&&r<2?v(n,t,2*r):[i,c,f]}function D(n,t,r){if(!((r=+r)>0))return[];if((n=+n)===(t=+t))return[n];const e=t<n,[a,u,o]=e?v(t,n,r):v(n,t,r);if(!(u>=a))return[];const i=u-a+1,c=new Array(i);if(e)if(o<0)for(let n=0;n<i;++n)c[n]=(u-n)/-o;else for(let n=0;n<i;++n)c[n]=(u-n)*o;else if(o<0)for(let n=0;n<i;++n)c[n]=(a+n)/-o;else for(let n=0;n<i;++n)c[n]=(a+n)*o;return c}function p(n,t,r){return v(n=+n,t=+t,r=+r)[2]}function E(n,t,r){r=+r;const e=(t=+t)<(n=+n),a=e?p(t,n,r):p(n,t,r);return(e?-1:1)*(a<0?1/-a:a)}function G(n){return Math.max(0,-M(Math.abs(n)))}function H(n,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(M(t)/3)))-M(Math.abs(n)))}function J(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,M(t)-M(n))+1}function K(n){return function(){return n}}function L(n){return+n}var N=[0,1];function s(n){return n}function d(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:K(isNaN(t)?NaN:.5)}function O(n,t){var r;return n>t&&(r=n,n=t,t=r),function(r){return Math.max(n,Math.min(t,r))}}function Q(n,t,r){var e=n[0],a=n[1],u=t[0],o=t[1];return a<e?(e=d(a,e),u=r(o,u)):(e=d(e,a),u=r(u,o)),function(n){return u(e(n))}}function T(n,t,r){var e=Math.min(n.length,t.length)-1,a=new Array(e),u=new Array(e),o=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<e;)a[o]=d(n[o],n[o+1]),u[o]=r(t[o],t[o+1]);return function(t){var r=j(n,t,1,e)-1;return u[r](a[r](t))}}function U(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function V(){var n,t,r,e,a,u,o=N,i=N,c=b,f=s;function l(){var n=Math.min(o.length,i.length);return f!==s&&(f=O(o[0],o[n-1])),e=n>2?T:Q,a=u=null,h}function h(t){return null==t||isNaN(t=+t)?r:(a||(a=e(o.map(n),i,c)))(n(f(t)))}return h.invert=function(r){return f(t((u||(u=e(i,o.map(n),y)))(r)))},h.domain=function(n){return arguments.length?(o=Array.from(n,L),l()):o.slice()},h.range=function(n){return arguments.length?(i=Array.from(n),l()):i.slice()},h.rangeRound=function(n){return i=Array.from(n),c=S,l()},h.clamp=function(n){return arguments.length?(f=!!n||s,l()):f!==s},h.interpolate=function(n){return arguments.length?(c=n,l()):c},h.unknown=function(n){return arguments.length?(r=n,h):r},function(r,e){return n=r,t=e,l()}}function W(){return V()(s,s)}function X(n,t,r,e){var a,u=E(n,t,r);switch((e=R(e??",f")).type){case"s":var o=Math.max(Math.abs(n),Math.abs(t));return null==e.precision&&!isNaN(a=H(u,o))&&(e.precision=a),q(e,o);case"":case"e":case"g":case"p":case"r":null==e.precision&&!isNaN(a=J(u,Math.max(Math.abs(n),Math.abs(t))))&&(e.precision=a-("e"===e.type));break;case"f":case"%":null==e.precision&&!isNaN(a=G(u))&&(e.precision=a-2*("%"===e.type))}return F(e)}function Y(n){var t=n.domain;return n.ticks=function(n){var r=t();return D(r[0],r[r.length-1],n??10)},n.tickFormat=function(n,r){var e=t();return X(e[0],e[e.length-1],n??10,r)},n.nice=function(r){null==r&&(r=10);var e,a,u=t(),o=0,i=u.length-1,c=u[o],f=u[i],s=10;for(f<c&&(a=c,c=f,f=a,a=o,o=i,i=a);s-- >0;){if((a=p(c,f,r))===e)return u[o]=c,u[i]=f,t(u);if(a>0)c=Math.floor(c/a)*a,f=Math.ceil(f/a)*a;else{if(!(a<0))break;c=Math.ceil(c*a)/a,f=Math.floor(f*a)/a}e=a}return n},n}function Z(){var n=W();return n.copy=function(){return U(n,Z())},A.apply(n,arguments),Y(n)}export{U as a,w as b,W as c,Z as l,E as t};