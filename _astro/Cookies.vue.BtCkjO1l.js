import{d as g,F as B,J as U,c as V,aA as A,e as h,o as p,M as S,K as F,w as u,f as d,q as x,E as b,u as f,T as O,aG as q,s as z,ax as L,aH as R,L as T,a2 as Z,aI as G,b as M,x as H,z as J,Z as P,ay as N}from"./_OpenAPI.CuaEDb0H.js";import{r as W}from"./EmptyState.vue.CXmmF-7o.js";import{m as Q,g as X}from"./SidebarButton.vue.eGuSLwBu.js";import{h as Y,b as y,_ as ee,a as ae}from"./CommandActionInput.vue.8QCIjryT.js";import{u as oe}from"./ViewLayout.vue.BfL5eU10.js";import{x as le}from"./ViewLayoutContent.vue.DAf3wOHK.js";import{_ as se}from"./ViewLayoutSection.vue.Cb_ixnp3.js";import{q as te}from"./Form.vue.BDeVtZ6y.js";import"./jsx-runtime.DCqPeNwG.js";import"./index.66AI1_x2.js";import"./_commonjsHelpers.Cpj98o6Y.js";import"./preload-helper.D_1diwkG.js";import"./index.jDpCNB1z.js";import"./floating-ui.dom.CMverA8Q.js";import"./ScalarAsciiArt.vue.DlT0Dvof.js";import"./ScalarHotkey.vue.iDwJ3vmx.js";import"./DeleteSidebarListElement.vue.zwe9Rtgr.js";const ie=g({__name:"CookieForm",setup(e){const{activeCookieId:a}=B(),{cookies:o,cookieMutators:s}=U(),l=[{label:"Name",key:"name",placeholder:"session_id"},{label:"Value",key:"value",placeholder:"my-cookie-session-id"},{label:"Domain",key:"domain",placeholder:"example.com"}],t=V((()=>o[a.value]||A.parse({name:"",value:"",domain:"",path:""}))),i=(e,o)=>{s.edit(a.value,e,o)};return(e,a)=>(p(),h(te,{data:t.value,onUpdate:i,options:l},null,8,["data"]))}}),ue={class:"flex h-8 items-start gap-2 text-sm"},ne={class:"flex h-8 items-start gap-2 text-sm"},de={class:"flex h-8 items-start gap-2 text-sm"},me=g({__name:"CookieModal",props:{state:{}},emits:["cancel","submit"],setup(e,{emit:a}){const o=e,s=a,l=S({name:"",value:"",domain:""}),{toast:t}=q(),i=()=>{l.value.name&&l.value.value?(s("submit",l.value),o.state.hide()):t("Please fill in all fields before adding a cookie.","error")};return F((()=>o.state.open),(e=>{e&&(l.value={name:"",value:"",domain:""})})),(e,a)=>(p(),h(f(O),{size:"xs",state:e.state,title:"Add Cookie"},{default:u((()=>[d(Y,{disabled:!l.value.name||!l.value.value,onCancel:a[3]||(a[3]=e=>s("cancel")),onSubmit:i},{submit:u((()=>a[7]||(a[7]=[b("Add Cookie")]))),default:u((()=>[x("div",ue,[a[4]||(a[4]=b(" Name: ")),d(y,{modelValue:l.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.name=e),autofocus:"",class:"!p-0",placeholder:"session_id"},null,8,["modelValue"])]),x("div",ne,[a[5]||(a[5]=b(" Value: ")),d(y,{modelValue:l.value.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.value=e),autofocus:"",class:"!p-0",placeholder:"my-cookie-session-id"},null,8,["modelValue"])]),x("div",de,[a[6]||(a[6]=b(" Domain: ")),d(y,{modelValue:l.value.domain,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.domain=e),autofocus:"",class:"!p-0",placeholder:"example.com"},null,8,["modelValue"])])])),_:1},8,["disabled"])])),_:1},8,["state"]))}}),re=z(me,[["__scopeId","data-v-694018d6"]]),ce={class:"flex-1"},pe={class:"relative mb-[.5px] last:mb-0"},De=g({__name:"Cookies",setup(e){const{cookies:a,cookieMutators:o,events:s,workspaceMutators:l}=U(),{activeWorkspace:t,activeCookieId:i}=B(),n=L(),m=R(),r=T(),c=e=>{var a,s;const i=A.parse({name:e.name,value:e.value,domain:e.domain,path:"/"});o.add(i),l.edit(null==(a=t.value)?void 0:a.uid,"cookies",[...(null==(s=t.value)?void 0:s.cookies)??[],i.uid]),n.push({name:"cookies",params:{cookies:i.uid}})},v=()=>{r.show()},k=e=>{null!=e&&e.createNew&&"cookies"===m.name&&v()};Z((()=>s.hotKeys.on(k))),G((()=>s.hotKeys.off(k)));const y=V((()=>a[i.value])),C=V((()=>Object.keys(a).length>0&&y.value));return(e,s)=>(p(),h(oe,null,{default:u((()=>[d(f(Q),{title:"Cookies"},{content:u((()=>[x("div",ce,[d(ee,null,{default:u((()=>[(p(!0),M(H,null,J(Object.values(f(a)),(e=>(p(),M("li",{key:e.uid,class:"gap-1/2 flex flex-col"},[x("div",pe,[(p(),h(ae,{key:e.uid,class:"text-xs",isDeletable:"",to:{name:"cookies",params:{[f(N).Cookies]:e.uid}},type:"cookies",variable:{name:e.name,uid:e.uid},warningMessage:"Are you sure you want to delete this cookie?",onClick:P((a=>((e,a)=>{var o;const s={name:"cookies",params:{workspace:(null==(o=t.value)?void 0:o.uid)??"default",cookies:a}};if(e.metaKey){const e=n.resolve(s).href;window.open(e,"_blank")}else n.push(s)})(a,e.uid)),["prevent"]),onDelete:s=>(e=>{var s,i;o.delete(e),l.edit(null==(s=t.value)?void 0:s.uid,"cookies",[...((null==(i=t.value)?void 0:i.cookies)??[]).filter((a=>a!==e))]);const u=Object.values(a).filter((a=>a.uid!==e));if(u.length>0){const e=u[u.length-1];e&&n.push(e.uid)}else n.push({name:"cookies",params:{[N.Cookies]:"default"}})})(e.uid)},null,8,["to","variable","onClick","onDelete"]))])])))),128))])),_:1})])])),button:u((()=>[d(X,{click:v,hotkey:"N"},{title:u((()=>s[1]||(s[1]=[b(" Add Cookie ")]))),_:1})])),_:1}),d(le,{class:"flex-1"},{default:u((()=>[C.value?(p(),h(se,{key:0,class:"*:border-b-0"},{title:u((()=>s[2]||(s[2]=[b("Edit Cookie")]))),default:u((()=>[d(ie)])),_:1})):(p(),h(W,{key:1}))])),_:1}),d(re,{state:f(r),onCancel:s[0]||(s[0]=e=>f(r).hide()),onSubmit:c},null,8,["state"])])),_:1}))}});export{De as default};