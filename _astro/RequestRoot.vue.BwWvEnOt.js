import{d as de,U as Ie,b as G,o as C,q as h,t as X,u as t,B as Y,aQ as Qe,aR as it,aS as Je,aT as We,aU as Me,aV as Xe,aW as Ae,aX as gt,aY as bt,aZ as xt,a_ as Ve,a$ as wt,b0 as kt,b1 as Et,b2 as Ct,b3 as Rt,b4 as _t,b5 as qt,b6 as Dt,b7 as St,F as fe,J as he,b8 as It,K as me,b9 as Mt,ba as Tt,bb as Oe,bc as et,aG as Be,V as Re,ax as xe,c as K,a2 as Te,f as R,w as q,$ as le,e as U,k as V,x as oe,z as Ce,Q as ve,Z as F,E as se,bd as ut,D as B,be as ct,S as je,M as Z,bf as Ut,bg as De,bh as Se,ay as ee,av as Fe,L as ke,aI as Ge,bi as At,a3 as _e,bj as we,I as Ot,T as Ee,bk as dt,s as Ue,r as $e,bl as zt,aP as Nt,aL as tt,bm as at,bn as Le,bo as Wt,l as Vt,bp as jt,X as lt,Y as st,p as $t,bq as Lt,br as pt,bs as Pt,bt as Ht,bu as Bt,aB as ne,bv as Ft,bw as Pe,bx as Gt,by as Yt,az as ze,bz as nt,aN as Kt}from"./_OpenAPI.CuaEDb0H.js";import{d as vt}from"./LibraryIcon.vue.BL8fHMTk.js";import{e as mt,i as Zt,C as Qt,D as Jt}from"./mediaTypes.BbwR6yNW.js";import{i as ot}from"./ScalarAsciiArt.vue.DlT0Dvof.js";import{g as Xt,m as ea}from"./SidebarButton.vue.eGuSLwBu.js";import{a as ta,w as He}from"./DeleteSidebarListElement.vue.zwe9Rtgr.js";import{m as aa,C as ft}from"./EditSidebarListElement.vue.BN-zxo-E.js";import{$ as la}from"./IconSelector.vue.C1PSxk5B.js";import"./jsx-runtime.DCqPeNwG.js";import"./index.66AI1_x2.js";import"./_commonjsHelpers.Cpj98o6Y.js";import"./preload-helper.D_1diwkG.js";import"./index.jDpCNB1z.js";import"./floating-ui.dom.CMverA8Q.js";/* empty css                            */import"./ScalarHotkey.vue.iDwJ3vmx.js";import"./ScalarPopover.vue.B-pQV5px.js";const sa={parse(e){try{return{error:!1,data:JSON.parse(e)}}catch(a){return{error:!0,message:a.message?String(a.message):"Unknown Error"}}}},na=["aria-pressed"],oa={class:"sr-only"},ra={class:"size-4",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ia={"clip-path":"url(#mask)"},ua=de({__name:"SidebarToggle",setup(e){const{isSidebarOpen:a,toggleSidebarOpen:l}=Ie();return(o,s)=>(C(),G("button",{"aria-pressed":t(a),class:"scalar-sidebar-toggle text-c-3 hover:bg-b-2 active:text-c-1 rounded-lg p-2",type:"button",onClick:s[0]||(s[0]=(...i)=>t(l)&&t(l)(...i))},[h("span",oa,X(t(a)?"Hide":"Show")+" sidebar",1),(C(),G("svg",ra,[s[1]||(s[1]=h("defs",null,[h("clipPath",{id:"mask"},[h("path",{"clip-rule":"evenodd",d:"M9 3.2H4c-1.7 0-3 1.3-3 3v11.5c0 1.7 1.3 3 3 3h5V3.2z"})])],-1)),h("g",ia,[h("path",{class:Y(["transition-transform duration-300",t(a)?"translate-x-0":"-translate-x-1/2"]),d:"M1 3.2h8v17.5H1z",fill:"currentColor"},null,2)]),s[2]||(s[2]=h("path",{d:"M20 20.8H4c-1.7 0-3-1.3-3-3V6.2c0-1.7 1.3-3 3-3h16c1.7 0 3 1.3 3 3v11.5c0 1.7-1.3 3-3 3zM9 3.2v17.5",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1))]))],8,na))}}),ca=e=>{const a=new Set;return e&&["path","query","headers","cookies"].some(l=>{var o,s;return(s=(o=e.parameters)==null?void 0:o[l])==null?void 0:s.some(i=>{i.required&&i.value===""&&a.add(i.key)})}),a},da={Date:!0,RegExp:!0,String:!0,Number:!0};function Ye(e,a,l={cyclesFix:!0},o=[]){let s=[];const i=Array.isArray(e);for(const r in e){const n=e[r],u=i?+r:r;if(!(r in a)){s.push({type:"REMOVE",path:[u],oldValue:e[r]});continue}const c=a[r],v=typeof n=="object"&&typeof c=="object"&&Array.isArray(n)===Array.isArray(c);n&&c&&v&&!da[Object.getPrototypeOf(n)?.constructor?.name]&&(!l.cyclesFix||!o.includes(n))?s.push.apply(s,Ye(n,c,l,l.cyclesFix?o.concat([n]):[]).map(f=>(f.path.unshift(u),f))):n!==c&&!(Number.isNaN(n)&&Number.isNaN(c))&&!(v&&(isNaN(n)?n+""==c+"":+n==+c))&&s.push({path:[u],type:"CHANGE",value:c,oldValue:n})}const d=Array.isArray(a);for(const r in a)r in e||s.push({type:"CREATE",path:[d?+r:r],value:a[r]});return s}const ht=(e,a=[])=>{const l=[];let o=!1;for(let s=0;s<e.length;s++){if(o){o=!1;continue}const i=e[s],d=e[s+1];if(i){if(a.length)i.path=[...a,...i.path],d&&(d.path=[...a,...d.path]);else if(i.path[0]!=="paths"){l.push(i);continue}if(i.type==="REMOVE"&&d?.type==="CREATE"){const[,r,n]=i.path,[,u,c]=d.path,v=["paths",u].filter(f=>typeof f=="string");if(r!==u&&l.push({type:"CHANGE",path:["paths","path"],oldValue:r,value:u}),n&&typeof c=="string"&&n!==c&&u&&(l.push({type:"CHANGE",path:["paths",u,"method"],oldValue:n,value:c}),v.push(c)),a.length===0){const f=Ye(i.oldValue,d.value);if(f.length){const D=ht(f,v);l.push(...D)}}o=!0}else i.type==="CREATE"&&i.path.length>3&&typeof i.path.at(-1)!="number"?l.push({...i,type:"CHANGE",oldValue:void 0}):i.type==="REMOVE"&&i.path.length>3&&typeof i.path.at(-1)!="number"?l.push({...i,type:"CHANGE",value:void 0}):l.push(i)}}return l},qe=(e,a,l)=>{for(const o of e){const s=a[o];if(s&&l(s))return s}return null},ge=e=>e instanceof _t?ge(e.unwrap()):e instanceof qt?ge(e._def.innerType):e instanceof Dt?ge(e._def.schema):e instanceof St?ge(e._def.innerType):e,pa=(e,a)=>{let l=e;for(const o of a){if(l=ge(l),l instanceof Et)return l;if(l instanceof Ve&&typeof o=="string"&&o in l.shape)l=l.shape[o];else if(l instanceof Ct)if(typeof o=="number")l=l.element;else if(typeof o=="string")if(l=l.element,l instanceof Ve&&o in l.shape)l=l.shape[o];else return null;else return null;else if(l instanceof Rt)l=l.valueSchema;else return null;l=ge(l)}return l},be=(e,a)=>{const l=pa(e,a.path);if(!l)return null;const o=a.path.join("."),s=a.path.slice(0,-1).join(".");if(a.type==="REMOVE")return{path:o,pathMinusOne:s,value:void 0};const i=Me(a.value,l,!1);return i?{path:o,pathMinusOne:s,value:i}:null},va=(e,{activeCollection:a},{collectionMutators:l})=>{if(!a.value)return!1;if(typeof e.path[e.path.length-1]=="number"&&(e.type==="CREATE"||e.type==="REMOVE")){const o=be(Qe,{...e,path:e.path});if(!o)return!1;const s=[...it(a.value,o.pathMinusOne)];e.type==="CREATE"?s.push(o.value):e.type==="REMOVE"&&s.pop(),l.edit(a.value.uid,o.pathMinusOne,s)}else{const o=be(Qe,e);if(!o)return!1;l.edit(a.value.uid,o.path,o.value)}return!0},rt=(e,a)=>{const{requests:l,requestExamples:o,requestExampleMutators:s}=a,i=l[e];i?.examples.forEach(d=>{var r;const n=kt(i,((r=o[d])==null?void 0:r.name)??"Default");n&&s.set({...n,uid:d})})},ma=(e,{activeCollection:a},l)=>{if(!a.value)return!1;const{requests:o,requestMutators:s}=l,[,i,d,...r]=e.path;if(i==="path"&&e.type==="CHANGE")a.value.requests.forEach(n=>{var u;((u=o[n])==null?void 0:u.path)===e.oldValue&&s.edit(n,"path",e.value)});else if(d==="method"&&e.type==="CHANGE")a.value.requests.forEach(n=>{var u,c;((u=o[n])==null?void 0:u.method)===e.oldValue&&((c=o[n])==null?void 0:c.path)===i&&s.edit(n,"method",e.value)});else if(e.type!=="CHANGE"&&typeof r.at(-1)=="number"){const n=qe(a.value.requests,o,v=>v.path===i&&v.method===d),u=be(Ae,{...e,path:e.path.slice(3)});if(!n||!u)return!1;const c=[...it(n,u.pathMinusOne)];e.type==="CREATE"?c.push(u.value):e.type==="REMOVE"&&c.pop(),s.edit(n.uid,u.pathMinusOne,c),(e.path[3]==="parameters"||e.path[3]==="requestBody")&&rt(n.uid,l)}else if(e.type==="CREATE"){const[n]=Object.entries(e.value??{}),[u,c]=n??[],v=d?e.value:c,f=d||u,D=We.array().parse(v.servers??[]),{security:x,...S}=v,T={...S,method:gt(f)?f:"get",path:i,parameters:v.parameters??[],servers:D.map(E=>E.uid)};x!=null&&x.length&&(T.security=x.map(E=>{if(Object.keys(E).length){const[w]=Object.keys(E);return w?{[w]:E[w]}:E}return E}));const M=Me(T,Ae,!1);if(!M)return!1;s.add(M,a.value.uid)}else if(e.type==="REMOVE"){const n=qe(a.value.requests,o,u=>u.path===i&&u.method===d);if(!n)return!1;s.delete(n,a.value.uid)}else if(e.type==="CHANGE"){const n=qe(a.value.requests,o,c=>c.path===i&&c.method===d),u=be(Ae,{...e,path:r});if(!n||!u)return!1;s.edit(n.uid,u.path,u.value),(e.path[3]==="parameters"||e.path[3]==="requestBody")&&rt(n.uid,l)}return!0},fa=(e,{activeCollection:a},{servers:l,serverMutators:o})=>{if(!a.value)return!1;const[,s,...i]=e.path;if(i!=null&&i.length){const d=a.value.servers[s];if(!d)return!1;const r=l[d],n=be(We,{...e,path:i});if(!r||!n)return!1;const u=e.type==="REMOVE"&&i[i.length-1]==="variables"?{}:n.value;o.edit(d,n.path,u)}else if(e.type==="REMOVE"){if(!a.value.servers[s])return!1;o.delete(a.value.servers[s],a.value.uid)}else if(e.type==="CREATE"){const d=Me(e.value,We,!1);if(!d)return!1;o.add(d,a.value.uid)}return!0},ha=(e,{activeCollection:a},{tags:l,tagMutators:o})=>{if(!a.value)return!1;const[,s,...i]=e.path;if(i!=null&&i.length){const d=a.value.tags[s];if(!d)return!1;const r=l[d],n=be(Xe,{...e,path:i});if(!r||!n)return!1;o.edit(d,n.path,n.value)}else if(e.type==="REMOVE"){const d=a.value.tags[s];if(!d)return!1;const r=l[d];if(!r)return!1;o.delete(r,a.value.uid)}else if(e.type==="CREATE"){const d=Me(e.value,Xe,!1);if(!d)return!1;o.add(d,a.value.uid)}return!0},ya=(e,a,l)=>{const o=ge(e);if(o instanceof bt||o instanceof xt){for(const s of o.options)if(s instanceof Ve&&a in s.shape&&s.shape[a]instanceof wt&&s.shape[a].value===l)return s}return null},ga=(e,{activeCollection:a},{securitySchemes:l,securitySchemeMutators:o})=>{if(!a.value)return!1;const[,,s,...i]=e.path,d=l[s]??qe(a.value.securitySchemes,l,r=>r.nameKey===s);if(i!=null&&i.length){const r=ya(Je,"type",d?.type??"");if(!r||!d)return!1;const n=be(r,{...e,path:i});if(!n)return!1;const u=n.path;o.edit(d.uid,u,n.value)}else if(e.type==="REMOVE"){if(!d)return!1;o.delete(d.uid)}else e.type==="CREATE"&&o.add(Je.parse(e.value),a.value.uid);return!0},ba=5*1e3,xa=60*1e3,wa=()=>{const{toast:e}=Be(),a=fe(),l=he(),{activeCollection:o,activeWorkspace:s}=a,{collectionMutators:i}=l,d=c=>e(`[useOpenApiWatcher] Changes to the ${c} were not applied`,"error"),r=c=>{c.path[0]==="info"||c.path[0]==="security"?va(c,a,l)||d("collection"):c.path[0]==="components"&&c.path[1]==="securitySchemes"?ga(c,a,l)||d("securitySchemes"):c.path[0]==="servers"?fa(c,a,l)||d("servers"):c.path[0]==="tags"?ha(c,a,l)||d("tags"):c.path[0]==="paths"&&(ma(c,a,l)||d("requests"))},{pause:n,resume:u}=It(async()=>{var c,v;const f=(c=o.value)==null?void 0:c.documentUrl;if(!f)return;const D=Oe[f];try{const x=await Mt(f,(v=s.value)==null?void 0:v.proxyUrl,!1),S=Tt(x);if(i.edit(o.value.uid,"watchModeStatus","WATCHING"),D!=null&&D.hash)if(D.hash&&D.hash!==S){const{schema:T}=await et(x),M=Ye(D.schema,T),E=ht(M);try{E.forEach(r),Oe[f]={hash:S,schema:T}}catch(w){console.error("[useOpenApiWatcher] Error:",w)}}else console.log("[useOpenApiWatcher] No changes detected yet…");else{const{schema:T}=await et(x);T&&(Oe[f]={hash:S,schema:T})}}catch(x){console.error("[useOpenApiWatcher] Error:",x),console.info("[useOpenApiWatcher] Pausing watcher for 60 seconds"),n(),i.edit(o.value.uid,"watchModeStatus","ERROR"),e("[useOpenApiWatcher] Unable to fetch the spec file, paused the watcher for 60 seconds","error"),setTimeout(()=>{console.info("[useOpenApiWatcher] Resuming watcher"),u()},xa)}},ba);me([()=>{var c;return(c=o.value)==null?void 0:c.documentUrl},()=>{var c;return(c=o.value)==null?void 0:c.watchMode}],([c,v])=>{c&&v?(console.info(`[useOpenApiWatcher] Watching ${c} …`),u()):o.value&&(n(),i.edit(o.value.uid,"watchModeStatus","IDLE"))},{immediate:!0})},ka=`         ,\\
         \\\\\\,_
          \\\` ,\\
     __,.-" =__)
   ."        )
,_/   ,    \\/\\_
\\_| )_-\\ \\_-\`
   \`-----\` \`--\``,Ea=`         __
        // \\,_
          \\\` ,\\
     __,.-" =__)
   ."        )
,_/   ,    \\/\\ 
\\_| // /  /  /
   /  /    `,Ca={class:"m-0 flex items-center gap-1.5 whitespace-nowrap font-medium"},Ra={class:"flex h-4 w-4 items-center justify-center"},_a=de({__name:"EnvironmentSelector",setup(e){const{activeCollection:a,activeWorkspace:l,activeEnvironment:o}=fe(),{collectionMutators:s}=he(),{layout:i}=Re(),d=xe(),r=f=>{a.value&&l.value&&(s.edit(a.value.uid,"x-scalar-active-environment",f),l.value.activeEnvironmentId=f)},n=()=>{var f;return d.push({name:"environment",params:{environment:(f=l.value)==null?void 0:f.uid}})},u=K(()=>{const{value:f}=o,{value:D}=a;return f?.uid||D?.["x-scalar-active-environment"]||"No Environment"}),c=K(()=>{const{value:f}=a,D=f?.["x-scalar-environments"];return D?Object.entries(D).map(([x,S])=>({...S,uid:x,name:x})):[]}),v=f=>{const D=f["x-scalar-active-environment"];D&&a.value&&l.value?(a.value["x-scalar-active-environment"]=D,l.value.activeEnvironmentId=D):l.value&&(l.value.activeEnvironmentId="")};return me(a,f=>f&&v(f)),Te(()=>{a.value&&v(a.value)}),(f,D)=>(C(),G("div",null,[R(t(je),{placement:"bottom-end"},{items:q(()=>[(C(!0),G(oe,null,Ce(c.value,x=>(C(),U(t(ve),{key:x.uid,class:"group/item flex items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:F(S=>r(x.uid),["stop"])},{default:q(()=>{var S;return[R(t(ut),{selected:((S=t(a))==null?void 0:S["x-scalar-active-environment"])===x.uid},null,8,["selected"]),se(" "+X(x.name),1)]}),_:2},1032,["onClick"]))),128)),R(t(ve),{class:"group/item flex items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:D[0]||(D[0]=F(x=>r(""),["stop"]))},{default:q(()=>{var x,S;return[h("div",{class:Y(["flex h-4 w-4 items-center justify-center rounded-full p-[3px]",((x=t(o))==null?void 0:x.uid)===""&&((S=t(a))==null?void 0:S["x-scalar-active-environment"])===""?"bg-c-accent text-b-1":"shadow-border text-transparent"])},[R(t(B),{class:"size-2.5",icon:"Checkmark",thickness:"3"})],2),D[1]||(D[1]=se(" No Environment "))]}),_:1}),R(t(ct)),t(i)!=="modal"?(C(),U(t(ve),{key:0,class:"flex items-center gap-1.5",onClick:n},{default:q(()=>[h("div",Ra,[R(t(B),{icon:"Brackets",size:"sm"})]),D[2]||(D[2]=h("span",{class:"leading-none"},"Manage Environments",-1))]),_:1})):V("",!0)]),default:q(()=>[R(t(le),{class:"text-c-1 hover:bg-b-2 h-auto w-fit justify-start px-1.5 py-1.5 pl-2 font-normal",fullWidth:"",variant:"ghost"},{default:q(()=>[h("h2",Ca,X(u.value),1)]),_:1})]),_:1})]))}});function qa(){const e=xe(),{activeWorkspace:a,activeWorkspaceRequests:l,activeWorkspaceCollections:o}=fe(),{requests:s,tags:i}=he(),d=Z([]),r=Z([]),n=Z(0),u=Z(""),c=Z(null),v=Z([]),f=new Ut(d.value,{keys:["title","description","body"]}),D=()=>{u.value="",n.value=0,r.value=[],c.value instanceof HTMLInputElement&&c.value.blur()},x=p=>{d.value=p.filter(y=>!Se(y)).filter(y=>{var A;const z=(A=o.value)==null?void 0:A.find(O=>O.requests.includes(y.uid));return!(z!=null&&z.tags.map(O=>i[O]).filter(De).filter(O=>{var N;return(N=y.tags)==null?void 0:N.includes(O.name)}).filter(O=>Se(O)).length)}).map(y=>{var A,z;return{id:y.uid,title:y.summary??y.method,description:y.description??"",httpVerb:y.method,path:y.path,link:(z=e?.resolve({name:"request",params:{[ee.Request]:y.uid,[ee.Workspace]:(A=a.value)==null?void 0:A.uid}}))==null?void 0:z.href}}),f.setCollection(d.value)},S=()=>{n.value=0,r.value=f.search(u.value)};me(u,p=>{p.length?S():r.value=[]});const T=p=>{const y=p==="up"?-1:1,A=m.value.length;n.value=(n.value+y+A)%A,Fe(()=>{const z=v.value[n.value];z instanceof HTMLElement&&z.scrollIntoView({behavior:"smooth",block:"center"})})},M=()=>{if(n.value>=0){const p=m.value[n.value];p&&w(p)}},E=K(()=>l.value.map(p=>s[p]).filter(De));me(l,()=>{x(E.value)},{immediate:!0});const w=p=>{e.push(p.item.id),D()},m=K(()=>u.value.length===0?d.value.map(p=>({item:p})):r.value);return{searchText:u,searchResultsWithPlaceholderResults:m,selectedSearchResult:n,onSearchResultClick:w,fuseSearch:S,searchInputRef:c,searchResultRefs:v,navigateSearchResults:T,selectSearchResult:M,populateFuseDataArray:x}}function Da(e,{collections:a,collectionMutators:l,tags:o,tagMutators:s,workspaceMutators:i}){const{layout:d}=Re(),r=(n,u)=>{n.type==="collection"?l.edit(n.uid,"children",u):n.type==="tag"&&s.edit(n.uid,"children",u)};return{handleDragEnd:(n,u)=>{var c,v,f,D;if(!n||!u)return;const{id:x,parentId:S}=n,{id:T,parentId:M,offset:E}=u;if(S?a[S]?l.edit(S,"children",a[S].children.filter(w=>w!==x)):o[S]&&s.edit(S,"children",o[S].children.filter(w=>w!==x)):i.edit((c=e.value)==null?void 0:c.uid,"collections",((v=e.value)==null?void 0:v.collections.filter(w=>w!==x))??[]),E===2){const w=a[T]||o[T];w&&r(w,[...w.children??[],x])}else if(M){const w=a[M]||o[M];if(!w)return;const m=[...w.children??[]],p=m.findIndex(y=>T===y)??0;m.splice(p+E,0,x),r(w,m)}else{const w=[...((f=e.value)==null?void 0:f.collections)??[]],m=w.findIndex(p=>T===p)??0;w.splice(m+E,0,x),i.edit((D=e.value)==null?void 0:D.uid,"collections",w)}},isDroppable:(n,u)=>{var c,v;return!(d==="modal"||!a[n.id]&&u.offset!==2||a[n.id]&&((v=(c=a[u.id])==null?void 0:c.info)==null?void 0:v.title)==="Drafts")}}}const Sa={class:"grid grid-cols-[auto,1fr] gap-2"},Ia={class:"flex aspect-square"},Ma=de({__name:"EditSidebarListCollection",props:{name:{},icon:{}},emits:["close","edit"],setup(e,{emit:a}){const l=e,o=a,s=Z(l.name),i=Z(l.icon);return(d,r)=>(C(),U(ta,{onCancel:r[2]||(r[2]=n=>o("close")),onSubmit:r[3]||(r[3]=n=>o("edit",s.value,i.value))},{default:q(()=>[h("div",Sa,[h("div",Ia,[R(la,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=n=>i.value=n),placement:"bottom-start"},{default:q(()=>[R(t(le),{class:"aspect-square h-auto px-0",variant:"outlined"},{default:q(()=>[R(t(vt),{class:"text-c-2 size-4",src:i.value},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])]),R(t(aa),{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=n=>s.value=n),autofocus:"",class:"flex-1"},null,8,["modelValue"])])]),_:1}))}}),Ta=de({__name:"RequestSidebarItemMenu",props:{menuItem:{}},emits:["closeMenu","toggleWatchMode","clearDrafts"],setup(e,{emit:a}){const l=e,o=a,{replace:s}=xe(),{activeRouterParams:i,activeWorkspaceCollections:d,activeWorkspaceRequests:r}=fe(),{events:n,requestMutators:u}=he(),c=ke(),v=ke(),f=ke(),D=()=>{var p;return n.commandPalette.emit({commandName:"Add Example",metaData:{itemUid:(p=l.menuItem.item)==null?void 0:p.entity.uid}})},x=(p,y)=>{var A;(A=l.menuItem.item)==null||A.edit(p,y),c.hide()},S=()=>{var p,y,A;if((p=l.menuItem.item)==null||p.delete(),!r.value.length){const{request:z}=dt(),O=d.value.find(N=>{var W;return((W=N.info)==null?void 0:W.title)==="Drafts"});O&&(u.add(z,O.uid),s({name:"request",params:{[ee.Request]:z.uid}}))}if(i.value[ee.Request]===((y=l.menuItem.item)==null?void 0:y.entity.uid)&&s({name:"request",params:{[ee.Request]:"default"}}),i.value[ee.Examples]===((A=l.menuItem.item)==null?void 0:A.entity.uid)&&s({name:"request",params:{[ee.Request]:"default"}}),d.value[0]){const z=d.value[0].requests[0];s({name:"request",params:{[ee.Request]:z}})}v.hide()},T=Z(null);me([()=>l.menuItem.open,T],async([p])=>{var y,A;p&&(A=(y=T.value)==null?void 0:y.$parent)!=null&&A.$el&&T.value.$parent.$el.focus()});const M=()=>l.menuItem.open&&o("closeMenu");Te(()=>window.addEventListener("click",M)),Ge(()=>window.removeEventListener("click",M));const E=()=>{o("toggleWatchMode",l.menuItem.item)},w=()=>{o("clearDrafts"),f.hide()},m=K(()=>{var p;return((p=l.menuItem.item)==null?void 0:p.title)==="Drafts"});return(p,y)=>{var A,z;return C(),G(oe,null,[p.menuItem.targetRef&&p.menuItem.open?(C(),U(t(Ot),{key:0,placement:"right-start",target:p.menuItem.targetRef,teleport:""},{floating:q(()=>[R(t(At),{onKeydown:y[3]||(y[3]=_e(O=>p.$emit("closeMenu"),["escape"]))},{default:q(()=>{var O,N;return[((O=p.menuItem.item)==null?void 0:O.entity.type)==="request"?(C(),U(t(we),{key:0,class:"flex gap-2",onClick:D},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Example",size:"md",thickness:"1.5"}),y[8]||(y[8]=h("span",null,"Add Example",-1))]),_:1})):V("",!0),m.value?V("",!0):(C(),U(t(we),{key:1,ref_key:"menuRef",ref:T,class:"flex gap-2",onClick:y[0]||(y[0]=W=>t(c).show())},{default:q(()=>{var W;return[R(t(B),{class:"inline-flex",icon:"Edit",size:"md",thickness:"1.5"}),h("span",null,[((W=p.menuItem.item)==null?void 0:W.entity.type)==="collection"?(C(),G(oe,{key:0},[se(" Edit ")],64)):(C(),G(oe,{key:1},[se(" Rename ")],64))])]}),_:1},512)),(N=p.menuItem.item)!=null&&N.documentUrl?(C(),U(t(we),{key:2,ref_key:"menuRef",ref:T,class:"flex gap-2",onClick:E},{default:q(()=>{var W,L;return[R(t(B),{class:"inline-flex",icon:(W=p.menuItem.item)!=null&&W.watchMode?"Unwatch":"Watch",size:"md",thickness:"1.5"},null,8,["icon"]),h("span",null,X((L=p.menuItem.item)!=null&&L.watchMode?"Disable Watch Mode":"Enable Watch Mode"),1)]}),_:1},512)):V("",!0),m.value?V("",!0):(C(),U(t(we),{key:3,class:"flex gap-2",onClick:y[1]||(y[1]=W=>t(v).show())},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),y[9]||(y[9]=h("span",null,"Delete",-1))]),_:1})),m.value?(C(),U(t(we),{key:4,class:"flex gap-2",onClick:y[2]||(y[2]=W=>t(f).show())},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),y[10]||(y[10]=h("span",null,"Clear Drafts",-1))]),_:1})):V("",!0)]}),_:1})]),_:1},8,["target"])):V("",!0),R(t(Ee),{size:"xxs",state:t(v),title:`Delete ${(A=p.menuItem.item)==null?void 0:A.resourceTitle}`},{default:q(()=>{var O,N;return[R(He,{variableName:((O=p.menuItem.item)==null?void 0:O.title)??"",warningMessage:(N=p.menuItem.item)==null?void 0:N.warning,onClose:y[4]||(y[4]=W=>t(v).hide()),onDelete:S},null,8,["variableName","warningMessage"])]}),_:1},8,["state","title"]),R(t(Ee),{size:"xxs",state:t(c),title:`Edit ${(z=p.menuItem.item)==null?void 0:z.resourceTitle}`},{default:q(()=>{var O,N,W,L;return[((O=p.menuItem.item)==null?void 0:O.resourceTitle)==="Collection"?(C(),U(Ma,{key:0,icon:((N=p.menuItem.item)==null?void 0:N.icon)||"interface-content-folder",name:(W=p.menuItem.item)==null?void 0:W.title,onClose:y[5]||(y[5]=j=>t(c).hide()),onEdit:x},null,8,["icon","name"])):(C(),U(ft,{key:1,name:((L=p.menuItem.item)==null?void 0:L.title)??"",onClose:y[6]||(y[6]=j=>t(c).hide()),onEdit:x},null,8,["name"]))]}),_:1},8,["state","title"]),R(t(Ee),{size:"xxs",state:t(f),title:"Clear Drafts"},{default:q(()=>[R(He,{variableName:"All Drafts",warningMessage:"This action will clear all drafts. This cannot be undone.",onClose:y[7]||(y[7]=O=>t(f).hide()),onDelete:w})]),_:1},8,["state"])],64)}}}),Ua=Ue(Ta,[["__scopeId","data-v-7d3c4813"]]),Aa=(e,a,l)=>{var o;const s=e.find(n=>{var u;return((u=n.info)==null?void 0:u.title)==="Drafts"}),i=a.length===1;if(!a[0])return!1;const d=s?.requests.includes(a[0]);if(!d)return!1;const r=((o=l[s?.requests[0]??""])==null?void 0:o.summary)!=="My First Request";return i&&d&&!r},ce=Z(null),pe=Z(null),Oa=(e,a)=>{let l=!1;return(...o)=>{l||(e(...o),l=!0,setTimeout(()=>l=!1,a))}},za=["draggable"],Na=de({__name:"Draggable",props:{ceiling:{default:.8},floor:{default:.2},isDraggable:{type:Boolean,default:!0},isDroppable:{type:[Boolean,Function],default:!0},parentIds:{},id:{}},emits:["onDragEnd","onDragStart"],setup(e,{expose:a,emit:l}){const o=l,s=K(()=>e.parentIds.at(-1)??null),i=v=>{!v.dataTransfer||!(v.target instanceof HTMLElement)||!e.isDraggable||(v.target.classList.add("dragging"),v.dataTransfer.dropEffect="move",v.dataTransfer.effectAllowed="move",ce.value={id:e.id,parentId:s.value},o("onDragStart",{id:e.id,parentId:s.value}))},d=v=>typeof e.isDroppable=="function"?e.isDroppable(ce.value,{id:e.id,parentId:s.value,offset:v}):e.isDroppable,r=Oa(v=>{var f,D;if(!ce.value||ce.value.id===e.id||e.parentIds.includes(((f=ce.value)==null?void 0:f.id)??""))return;const x=(D=pe.value)==null?void 0:D.offset,S=v.target.offsetHeight,T=e.floor*S,M=e.ceiling*S;let E=3;v.offsetY<=0&&x&&x!==3?E=x:v.offsetY<=T?E=0:v.offsetY>=M?E=1:v.offsetY>T&&v.offsetY<M&&(E=2),d(E)&&(pe.value={id:e.id,parentId:s.value,offset:E})},25),n=["above","below","asChild"],u=K(()=>{var v;let f="sidebar-indent-nested";return e.id===((v=pe.value)==null?void 0:v.id)&&(f+=` dragover-${n[pe.value.offset]}`),f}),c=()=>{if(!pe.value||!ce.value)return;const v={...ce.value},f={...pe.value};ce.value=null,pe.value=null,document.querySelectorAll("div.dragging").forEach(D=>D.classList.remove("dragging")),v.id!==f.id&&o("onDragEnd",v,f)};return a({draggingItem:ce,hoveredItem:pe}),(v,f)=>(C(),G("div",{class:Y(u.value),draggable:v.isDraggable,onDragend:c,onDragover:f[0]||(f[0]=F((...D)=>t(r)&&t(r)(...D),["prevent","stop"])),onDragstart:F(i,["stop"])},[$e(v.$slots,"default",{},void 0,!0)],42,za))}}),Wa=(e,a)=>{const l=e.__vccOpts||e;for(const[o,s]of a)l[o]=s;return l},Va=Wa(Na,[["__scopeId","data-v-3449bf19"]]),ja={class:"line-clamp-1 w-full break-all pl-2 font-medium"},$a={class:"flex flex-row items-center gap-1"},La={class:"relative"},Pa={class:"flex items-start"},Ha=["aria-expanded"],Ba={class:"flex flex-1 flex-row justify-between font-medium"},Fa={class:"line-clamp-1 w-full break-all text-left"},Ga={class:"relative flex h-fit justify-end"},Ya={class:"w-content bg-b-1 z-100 text-xxs text-c-1 pointer-events-none z-10 grid max-w-10 gap-1.5 rounded p-2 leading-5 shadow-lg"},Ka={class:"text-c-2 flex items-center"},Za={class:"text-pretty break-all"},Qa=["aria-expanded"],Ja={class:"flex h-5 max-w-[14px] items-center justify-center"},Xa={class:"flex flex-1 flex-row justify-between"},el={class:"line-clamp-1 w-full break-all text-left font-medium"},tl={class:"relative flex h-fit justify-end"},al={class:"w-content bg-b-1 z-100 text-xxs text-c-1 pointer-events-none z-10 grid max-w-10 gap-1.5 rounded p-2 leading-5 shadow-lg"},ll={class:"text-c-2 flex items-center"},sl={class:"text-pretty break-all"},nl={key:3},Ne="hover:bg-sidebar-active-b indent-padding-left",ol=de({__name:"RequestSidebarItem",props:{isDraggable:{type:Boolean,default:!1},isDroppable:{type:[Boolean,Function],default:!1},parentUids:{},uid:{},menuItem:{}},emits:["onDragEnd","newTab","openMenu"],setup(e,{emit:a}){zt(g=>({f1b25d28:y.value,"30af9cd2":A.value}));const l=a,{activeCollection:o,activeRequest:s,activeRouterParams:i,activeWorkspace:d}=fe(),{collections:r,tags:n,requests:u,requestExamples:c,collectionMutators:v,tagMutators:f,requestMutators:D,requestExampleMutators:x,events:S}=he(),T=xe(),{collapsedSidebarFolders:M,toggleSidebarFolder:E}=Ie(),{layout:w}=Re(),m=K(()=>{var g,b,J,te,ie,$;const _=r[e.uid],k=n[e.uid],I=u[e.uid],P=c[e.uid];return _?{title:((g=_.info)==null?void 0:g.title)||"Untitled Collection",entity:_,resourceTitle:"Collection",children:_.children,icon:_["x-scalar-icon"],documentUrl:_.documentUrl,watchMode:_.watchMode,to:_.uid&&((b=_?.info)==null?void 0:b.title)!=="Drafts"?{name:"collection",params:{[ee.Workspace]:(J=d.value)==null?void 0:J.uid,[ee.Collection]:_.uid}}:void 0,warning:"This cannot be undone. You’re about to delete the collection and all folders and requests inside it.",edit:(H,ue)=>{v.edit(_.uid,"info.title",H),ue&&v.edit(_.uid,"x-scalar-icon",ue)},delete:()=>{d.value&&v.delete(_,d.value)}}:k?{title:k.name,entity:k,resourceTitle:"Tag",children:k.children,warning:"This cannot be undone. You’re about to delete the tag and all requests inside it",edit:H=>f.edit(k.uid,"name",H),delete:()=>e.parentUids[0]&&f.delete(k,e.parentUids[0])}:I?{title:I.summary??I.path,to:{name:"request",params:{workspace:(te=d.value)==null?void 0:te.uid,request:I.uid}},method:I.method,entity:I,resourceTitle:"Request",warning:"This cannot be undone. You’re about to delete the request.",children:I.examples.slice(1),edit:H=>D.edit(I.uid,"summary",H),delete:()=>e.parentUids[0]&&D.delete(I,e.parentUids[0])}:P!=null&&P.requestUid?{title:P.name,to:{name:"request.examples",params:{workspace:(ie=d.value)==null?void 0:ie.uid,request:P.requestUid,examples:P.uid}},method:($=u[P.requestUid])==null?void 0:$.method,entity:P,resourceTitle:"Example",warning:"This cannot be undone. You’re about to delete the example from the request.",children:[],edit:H=>x.edit(P.uid,"name",H),delete:()=>x.delete(P)}:{title:"Unknown",entity:{uid:"",type:"unknown"},resourceTitle:"Unknown",children:[],edit:()=>null,delete:()=>null}}),p=K(()=>m.value.entity.type==="collection"&&m.value.title==="Drafts"),y=K(()=>e.parentUids.length?w==="modal"?`${(e.parentUids.length-1)*12}px`:`${e.parentUids.length*12}px`:"12px"),A=K(()=>e.parentUids.length?w==="modal"?`${(e.parentUids.length-1)*12}px`:`${e.parentUids.length*12}px`:"0px"),z=K(()=>{var g;return M[e.uid]||((g=s.value)==null?void 0:g.uid)===e.uid&&m.value.entity.examples.length>1}),O=K(()=>{var g;return typeof T.currentRoute.value.name=="string"&&T.currentRoute.value.name.startsWith("request")&&i.value[ee.Request]==="default"&&((g=s.value)==null?void 0:g.uid)===e.uid}),N=Z(null),W=K(()=>{let g=.5,b=.5;if(!N.value)return{ceiling:g,floor:b};const{draggingItem:J}=N.value;return!r[J?.id]&&m.value.entity.type==="collection"?(g=1,b=0):m.value.entity.type==="tag"&&(g=.8,b=.2),{ceiling:g,floor:b}}),L=(g,b)=>!(w==="modal"||c[b.id]||r[g.id]),j=(g,b)=>{g&&(Wt(["default"]).some(J=>g[J])?l("newTab",b.title||"",b.entity.uid):b.to&&T.push(b.to),Fe(()=>S.focusAddressBar.emit()))};function Q(g){var b,J,te;const ie=e.parentUids[0]?((b=r[e.parentUids[0]])==null?void 0:b.uid)||"":g,$=e.parentUids[0]&&(J=n[g])!=null&&J.name?{tags:[n[g].name]}:{},_=D.add($,ie);_&&(T.push({name:"request",params:{workspace:(te=d.value)==null?void 0:te.uid,request:_.uid}}),S.hotKeys.emit({focusAddressBar:new KeyboardEvent("keydown",{key:"l"})}))}const re=K(()=>{const{uid:g,watchModeStatus:b}=o.value||{};return g!==m.value.entity.uid?"text-c-3":b==="WATCHING"?"text-c-1":b==="ERROR"?"text-red":"text-c-3"}),ae=K(()=>m.value.title==="Drafts"&&w!=="modal"&&m.value.children.length>0),ye=K(()=>{const g=u[e.uid];if(g)return!Se(g);const b=n[e.uid];return b?!Se(b):!0});return(g,b)=>{const J=Nt("RequestSidebarItem",!0);return ye.value?(C(),G("li",{key:0,class:Y(["relative flex flex-row",[t(w)==="modal"&&g.parentUids.length>1||t(w)!=="modal"&&g.parentUids.length?"before:bg-border indent-border-line-offset before:z-1 mb-[.5px] before:pointer-events-none before:absolute before:left-[calc(.75rem_+_.5px)] before:top-0 before:h-[calc(100%_+_.5px)] before:w-[.5px] last:mb-0 last:before:h-full":""]])},[R(t(Va),{id:m.value.entity.uid,ref_key:"draggableRef",ref:N,ceiling:W.value.ceiling,class:"gap-1/2 flex flex-1 flex-col text-sm",floor:W.value.floor,isDraggable:g.isDraggable,isDroppable:g.isDroppable,parentIds:g.parentUids,onOnDragEnd:b[13]||(b[13]=(...te)=>g.$emit("onDragEnd",...te))},{default:q(()=>{var te,ie;return[(m.value.entity.type==="request"||m.value.entity.type==="requestExample")&&m.value.to?(C(),U(t(tt),{key:0,class:"group no-underline",to:m.value.to,onClick:b[1]||(b[1]=F($=>j($,m.value),["prevent"]))},{default:q(({isExactActive:$})=>{var _,k;return[h("div",{class:Y(["relative flex min-h-8 w-full cursor-pointer flex-row items-start justify-between gap-0.5 rounded py-1.5 pr-2",[Ne,$||O.value?"bg-sidebar-active-b text-sidebar-active-c transition-none":"text-sidebar-c-2"]])},[h("span",ja,X(m.value.title||"Untitled"),1),h("div",$a,[h("div",La,[t(w)!=="modal"?(C(),U(t(le),{key:0,class:Y(["hover:bg-b-3 hidden aspect-square h-fit px-0.5 py-0 opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:((k=(_=g.menuItem)==null?void 0:_.item)==null?void 0:k.entity.uid)===m.value.entity.uid&&g.menuItem.open}]),size:"sm",type:"button",variant:"ghost",onClick:b[0]||(b[0]=F(I=>g.$emit("openMenu",{item:m.value,parentUids:g.parentUids,targetRef:I.currentTarget,open:!g.menuItem.open}),["stop","prevent"]))},{default:q(()=>[R(t(B),{icon:"Ellipses",size:"md"})]),_:1},8,["class"])):V("",!0)]),h("span",Pa,[b[14]||(b[14]=se("   ")),b[15]||(b[15]=h("span",{class:"sr-only"},"HTTP Method:",-1)),m.value.method?(C(),U(t(mt),{key:0,class:"font-bold",method:m.value.method},null,8,["method"])):V("",!0)])])],2)]}),_:1},8,["to"])):(t(w)!=="modal"||g.parentUids.length)&&m.value.entity.type==="collection"?(C(),G("div",{key:1,"aria-expanded":!!t(M)[m.value.entity.uid],class:Y(["hover:bg-b-2 group relative flex w-full flex-row justify-start gap-1.5 rounded p-1.5 focus-visible:z-10",[Ne,{"bg-sidebar-active-b text-sidebar-active-c transition-none":typeof t(T).currentRoute.value.name=="string"&&t(T).currentRoute.value.name.startsWith("collection")&&t(T).currentRoute.value.params[t(ee).Collection]===m.value.entity.uid,"text-c-2":m.value.title==="Untitled Collection"}]])},[h("span",{class:"flex h-5 max-w-[14px] cursor-pointer items-center justify-center",onClick:b[2]||(b[2]=$=>t(E)(m.value.entity.uid))},[$e(g.$slots,"leftIcon",{},()=>[R(t(at),{class:"text-c-3 shrink-0",open:!!t(M)[m.value.entity.uid]},null,8,["open"])],!0),b[16]||(b[16]=se("   "))]),h("div",Ba,[m.value.to?(C(),U(t(tt),{key:0,class:"w-full no-underline",to:m.value.to,onClick:b[3]||(b[3]=F(()=>{},["stop","prevent"]))},{default:q(()=>[h("span",Fa,X(m.value.title),1)]),_:1},8,["to"])):(C(),G(oe,{key:1},[se(X(m.value.title),1)],64)),h("div",Ga,[h("div",{class:Y(["items-center gap-px opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:g.menuItem.open,hidden:!g.menuItem.open||((te=g.menuItem.item)==null?void 0:te.entity.uid)!==m.value.entity.uid}])},[t(w)!=="modal"&&!p.value||p.value&&ae.value?(C(),U(t(le),{key:0,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:b[4]||(b[4]=F($=>g.$emit("openMenu",{item:m.value,parentUids:g.parentUids,targetRef:$.currentTarget.parentNode,open:!0}),["stop","prevent"]))},{default:q(()=>[R(t(B),{icon:"Ellipses",size:"md"})]),_:1})):V("",!0),t(w)!=="modal"?(C(),U(t(le),{key:1,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:b[5]||(b[5]=F($=>Q(m.value.entity.uid),["stop","prevent"]))},{default:q(()=>[R(t(B),{icon:"Add",size:"md",thickness:"2"})]),_:1})):V("",!0)],2),m.value.watchMode?(C(),U(t(Le),{key:0,side:"right",sideOffset:12},{trigger:q(()=>[R(t(B),{class:Y(["ml-0.5 text-sm",re.value]),icon:"Watch",size:"md",thickness:"2"},null,8,["class"])]),content:q(()=>[h("div",Ya,[h("div",Ka,[h("p",Za," Watching: "+X(m.value.documentUrl),1)])])]),_:1})):V("",!0),b[17]||(b[17]=h("span",null," ",-1))])])],10,Ha)):t(w)!=="modal"||g.parentUids.length?(C(),G("button",{key:2,"aria-expanded":!!t(M)[m.value.entity.uid],class:Y(["hover:bg-b-2 group relative flex w-full flex-row justify-start gap-1.5 rounded p-1.5 focus-visible:z-10",[Ne]]),type:"button",onClick:b[8]||(b[8]=$=>t(E)(m.value.entity.uid))},[h("span",Ja,[$e(g.$slots,"leftIcon",{},()=>[R(t(at),{class:"text-c-3 hover:text-c-1 shrink-0",open:!!t(M)[m.value.entity.uid]},null,8,["open"])],!0),b[18]||(b[18]=se("   "))]),h("div",Xa,[h("span",el,X(m.value.title),1),h("div",tl,[h("div",{class:Y(["items-center gap-px opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:g.menuItem.open,hidden:!g.menuItem.open||((ie=g.menuItem.item)==null?void 0:ie.entity.uid)!==m.value.entity.uid}])},[t(w)!=="modal"&&!p.value||p.value&&ae.value?(C(),U(t(le),{key:0,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:b[6]||(b[6]=F($=>g.$emit("openMenu",{item:m.value,parentUids:g.parentUids,targetRef:$.currentTarget.parentNode,open:!0}),["stop","prevent"]))},{default:q(()=>[R(t(B),{icon:"Ellipses",size:"md"})]),_:1})):V("",!0),t(w)!=="modal"?(C(),U(t(le),{key:1,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:b[7]||(b[7]=F($=>Q(m.value.entity.uid),["stop","prevent"]))},{default:q(()=>[R(t(B),{icon:"Add",size:"md",thickness:"2"})]),_:1})):V("",!0)],2),m.value.watchMode?(C(),U(t(Le),{key:0,side:"right",sideOffset:12},{trigger:q(()=>[R(t(B),{class:Y(["ml-0.5 text-sm",re.value]),icon:"Watch",size:"md",thickness:"2"},null,8,["class"])]),content:q(()=>[h("div",al,[h("div",ll,[h("p",sl," Watching: "+X(m.value.documentUrl),1)])])]),_:1})):V("",!0),b[19]||(b[19]=h("span",null," ",-1))])])],10,Qa)):V("",!0),z.value?(C(),G("ul",nl,[(C(!0),G(oe,null,Ce(m.value.children,$=>(C(),U(J,{key:$,isDraggable:!t(c)[$],isDroppable:L,menuItem:g.menuItem,parentUids:[...g.parentUids,g.uid],uid:$,onNewTab:b[9]||(b[9]=(_,k)=>g.$emit("newTab",_,k)),onOnDragEnd:b[10]||(b[10]=(..._)=>g.$emit("onDragEnd",..._)),onOpenMenu:b[11]||(b[11]=_=>g.$emit("openMenu",_))},null,8,["isDraggable","menuItem","parentUids","uid"]))),128)),m.value.children.length===0?(C(),U(t(le),{key:0,class:Y(["text-c-1 hover:bg-b-2 flex h-8 w-full justify-start gap-1.5 py-0 text-xs",g.parentUids.length?"pl-9":""]),variant:"ghost",onClick:b[12]||(b[12]=$=>Q(m.value.entity.uid))},{default:q(()=>[R(t(B),{icon:"Add",size:"sm"}),b[20]||(b[20]=h("span",null,"Add Request",-1))]),_:1},8,["class"])):V("",!0)])):V("",!0)]}),_:3},8,["id","ceiling","floor","isDraggable","isDroppable","parentIds"])],2)):V("",!0)}}}),rl=Ue(ol,[["__scopeId","data-v-716d294a"]]),il={class:"flex w-[inherit] items-center text-sm"},ul={class:"m-0 flex items-center gap-1.5 font-bold"},cl={class:"line-clamp-1 text-left"},dl={class:"overflow-hidden text-ellipsis"},pl={class:"flex h-4 w-4 items-center justify-center"},vl=de({__name:"WorkspaceDropdown",setup(e){const{activeWorkspace:a}=fe(),{workspaces:l,workspaceMutators:o,events:s}=he(),{push:i}=xe(),d=M=>{var E;M!==((E=a.value)==null?void 0:E.uid)&&i({name:"workspace",params:{workspace:M}})},r=K(()=>Object.keys(l).length===1),n=()=>s.commandPalette.emit({commandName:"Create Workspace"}),u=Z(""),c=Z(""),v=ke(),f=ke(),D=M=>{const E=l[M];E&&(u.value=E.name,c.value=M,v.show())},x=M=>{M.trim()&&(o.edit(c.value,"name",M.trim()),v.hide())},S=M=>{const E=l[M];E&&(u.value=E.name,c.value=M,f.show())},T=async()=>{var M;if(!r.value){const E=((M=a.value)==null?void 0:M.uid)===c.value,w={...l};if(delete w[c.value],o.delete(c.value),E){const m=Object.keys(w)[0];await i({name:"workspace",params:{workspace:m}})}}f.hide()};return(M,E)=>(C(),G("div",null,[h("div",il,[R(t(je),null,{items:q(()=>[(C(!0),G(oe,null,Ce(t(l),(w,m)=>(C(),U(t(ve),{key:m,class:"group/item flex w-full items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:F(p=>d(w.uid),["stop"])},{default:q(()=>{var p;return[R(t(ut),{selected:((p=t(a))==null?void 0:p.uid)===m},null,8,["selected"]),h("span",dl,X(w.name),1),R(t(je),{placement:"right-start",teleport:""},{items:q(()=>[R(t(ve),{class:"flex gap-2",onMousedown:y=>D(w.uid),onTouchend:F(y=>D(w.uid),["prevent"])},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Edit",size:"md",thickness:"1.5"}),E[4]||(E[4]=h("span",null,"Rename",-1))]),_:2},1032,["onMousedown","onTouchend"]),r.value?(C(),U(t(Le),{key:0,class:"z-overlay",side:"bottom"},{trigger:q(()=>[R(t(ve),{class:"flex w-full gap-2",disabled:"",onMousedown:E[0]||(E[0]=F(()=>{},["prevent"])),onTouchend:E[1]||(E[1]=F(()=>{},["prevent"]))},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),E[5]||(E[5]=h("span",null,"Delete",-1))]),_:1})]),content:q(()=>E[6]||(E[6]=[h("div",{class:"w-content bg-b-1 text-xxs text-c-1 pointer-events-none z-10 grid min-w-48 gap-1.5 rounded p-2 leading-5 shadow-lg"},[h("div",{class:"text-c-2 flex items-center"},[h("span",null,"Only workspace cannot be deleted.")])],-1)])),_:1})):(C(),U(t(ve),{key:1,class:"flex !gap-2",onMousedown:F(y=>S(w.uid),["prevent"]),onTouchend:F(y=>S(w.uid),["prevent"])},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Delete",size:"sm",thickness:"1.5"}),E[7]||(E[7]=h("span",null,"Delete",-1))]),_:2},1032,["onMousedown","onTouchend"]))]),default:q(()=>[R(t(le),{class:"hover:bg-b-3 -mr-1 ml-auto aspect-square h-fit px-0.5 py-0 group-hover/item:flex",size:"sm",type:"button",variant:"ghost"},{default:q(()=>[R(t(B),{icon:"Ellipses",size:"sm"})]),_:1})]),_:2},1024)]}),_:2},1032,["onClick"]))),128)),R(t(ct)),R(t(ve),{class:"flex items-center gap-1.5",onClick:n},{default:q(()=>[h("div",pl,[R(t(B),{icon:"Add",size:"sm"})]),E[8]||(E[8]=h("span",null,"Create Workspace",-1))]),_:1})]),default:q(()=>[R(t(le),{class:"text-c-1 hover:bg-b-2 line-clamp-1 h-full w-fit justify-start px-1.5 py-1.5 font-normal",fullWidth:"",variant:"ghost"},{default:q(()=>{var w;return[h("div",ul,[h("h2",cl,X((w=t(a))==null?void 0:w.name),1)])]}),_:1})]),_:1})]),R(t(Ee),{size:"xxs",state:t(f),title:"Delete workspace"},{default:q(()=>[R(He,{variableName:u.value,warningMessage:"This cannot be undone. You’re about to delete the workspace and everything inside it.",onClose:E[2]||(E[2]=w=>t(f).hide()),onDelete:T},null,8,["variableName"])]),_:1},8,["state"]),R(t(Ee),{size:"xxs",state:t(v),title:"Rename Workspace"},{default:q(()=>[R(ft,{name:u.value,onClose:E[3]||(E[3]=w=>t(v).hide()),onEdit:x},null,8,["name"])]),_:1},8,["state"])]))}}),ml={class:"bg-b-1 sticky top-0 z-20 flex h-12 items-center px-3"},fl={key:1,class:"text-c-3"},hl=["aria-pressed"],yl={class:"sr-only"},gl={class:"search-button-fade sticky top-12 z-10 px-3 py-2.5 pt-0 focus-within:z-20",role:"search"},bl={key:1,class:"contents"},xl={class:"empty-sidebar-item-content px-2.5 py-2.5"},wl={class:"rabbit-ascii relative m-auto mt-2 h-[68px] w-[60px]"},kl=de({__name:"RequestSidebar",emits:["newTab","clearDrafts"],setup(e,{emit:a}){const l=a,{collapsedSidebarFolders:o,isSidebarOpen:s,setCollapsedSidebarFolder:i,toggleSidebarOpen:d}=Ie(),{layout:r}=Re(),n=he(),{activeWorkspaceCollections:u,activeRequest:c,activeWorkspaceRequests:v,activeWorkspace:f}=fe(),{findRequestParents:D,events:x,requestMutators:S,requests:T}=n,{handleDragEnd:M,isDroppable:E}=Da(f,n),{replace:w}=xe(),m=()=>{x.commandPalette.emit({commandName:"Import from OpenAPI/Swagger/Postman/cURL"})},p=Vt(),{toast:y}=Be(),A=jt({open:!1}),z=Z(!1);me(c,_=>{_&&D(_).forEach(k=>i(k,!0))},{immediate:!0});const{searchText:O,searchResultsWithPlaceholderResults:N,selectedSearchResult:W,onSearchResultClick:L,fuseSearch:j,searchInputRef:Q,searchResultRefs:re,navigateSearchResults:ae,selectSearchResult:ye}=qa(),g=_=>{var k;_&&(_.toggleSidebar&&d(),_.focusRequestSearch&&((k=Q.value)==null||k.focus()))};Te(()=>x.hotKeys.on(g)),Ge(()=>{x.hotKeys.off(g)});const b=_=>{if(_!=null&&_.documentUrl){_.watchMode=!_.watchMode;const k=u.value.find(I=>I.uid===_.entity.uid);k&&(k.watchMode=_.watchMode)}};me(()=>u.value.map(_=>_.watchMode),(_,k)=>{_.forEach((I,P)=>{var H,ue,Ke;if(r!=="modal"&&I!==k[P]&&((ue=(H=u.value[P])==null?void 0:H.info)==null?void 0:ue.title)!=="Drafts"&&u.value[P]){const Ze=u.value[P];if(!Ze)return;const yt=`${(Ke=Ze.info)==null?void 0:Ke.title}: Watch Mode ${I?"enabled":"disabled"}`;y(yt,"info")}})});const J=K(()=>{var _;const k=N.value;if(!k.length)return"No results found";const I=(_=k[W.value])==null?void 0:_.item;if(!I)return"No result selected";const P=O.value.length?`${k.length} result${k.length===1?"":"s"} found, `:"",H=`, HTTP Method ${I.httpVerb}, Path ${I.path}`,ue=`${I.title} ${H}`;return`${P}Selected: ${ue}`}),te=()=>{const _=u.value.find(k=>{var I;return((I=k.info)==null?void 0:I.title)==="Drafts"});if(_&&_.requests.forEach(k=>{T[k]&&S.delete(T[k],_.uid)}),v.value.length){const k=u.value[0],I=k?.requests[0];I&&w({name:"request",params:{[ee.Request]:I}})}else{const{request:k}=dt();_&&(S.add(k,_.uid),w({name:"request",params:{[ee.Request]:k.uid}}))}},ie=()=>{z.value=!z.value,z.value||(O.value=""),z.value&&Fe(()=>{var _;return(_=Q.value)==null?void 0:_.focus()})},$=K(()=>Aa(u.value,v.value,T));return(_,k)=>(C(),G(oe,null,[lt(R(t(ea),{class:Y([t(s)?"sidebar-active-width":""])},$t({content:q(()=>[h("div",ml,[h("div",{class:Y(["size-8",{"xl:hidden":t(r)!=="modal"}])},null,2),t(r)!=="modal"?(C(),U(t(vl),{key:0})):V("",!0),t(r)!=="modal"?(C(),G("span",fl," / ")):V("",!0),t(r)!=="modal"?(C(),U(_a,{key:2})):V("",!0),h("button",{"aria-pressed":z.value,class:"ml-auto",type:"button",onClick:ie},[h("span",yl,X(z.value?"Hide":"Show")+" search ",1),R(t(B),{class:"text-c-3 hover:bg-b-2 p-1.75 max-h-8 max-w-8 rounded-lg text-sm",icon:"Search"})],8,hl)]),lt(h("div",gl,[R(t(Lt),{ref_key:"searchInputRef",ref:Q,modelValue:t(O),"onUpdate:modelValue":k[0]||(k[0]=I=>pt(O)?O.value=I:null),"aria-controls":t(p),label:J.value,sidebar:"",onInput:t(j),onKeydown:[k[1]||(k[1]=_e(F(I=>t(ae)("down"),["stop"]),["down"])),k[2]||(k[2]=_e(F(I=>t(ye)(),["stop"]),["enter"])),k[3]||(k[3]=_e(F(I=>t(ae)("up"),["stop"]),["up"]))]},null,8,["modelValue","aria-controls","label","onInput"])],512),[[st,z.value]]),h("div",{class:Y(["gap-1/2 flex flex-1 flex-col overflow-visible overflow-y-auto px-3 pb-3 pt-0",[{"pb-14":t(r)!=="modal"},{"h-[calc(100%-273.5px)]":$.value}]]),onDragenter:k[6]||(k[6]=F(()=>{},["prevent"])),onDragover:k[7]||(k[7]=F(()=>{},["prevent"]))},[t(O)?(C(),U(t(Pt),{key:0,id:t(p),"aria-label":"Search Results",class:"gap-px",noResults:!t(N).length},{default:q(()=>[(C(!0),G(oe,null,Ce(t(N),(I,P)=>(C(),U(t(Ht),{id:`#search-input-${I.item.id}`,key:I.refIndex,ref_for:!0,ref:H=>t(re)[P]=H,active:t(W)===P,class:"px-2",href:I.item.link,onClick:F(H=>t(L)(I),["prevent"]),onFocus:H=>W.value=P},{addon:q(()=>[k[9]||(k[9]=h("span",{class:"sr-only"},"HTTP Method:",-1)),R(mt,{class:"font-bold",method:I.item.httpVerb??"get"},null,8,["method"])]),default:q(()=>[se(X(I.item.title)+" ",1)]),_:2},1032,["id","active","href","onClick","onFocus"]))),128))]),_:1},8,["id","noResults"])):(C(),G("nav",bl,[(C(!0),G(oe,null,Ce(t(u),I=>{var P;return C(),U(rl,{key:I.uid,isDraggable:t(r)!=="modal"&&((P=I.info)==null?void 0:P.title)!=="Drafts",isDroppable:t(E),menuItem:A,parentUids:[],uid:I.uid,onNewTab:k[4]||(k[4]=(H,ue)=>l("newTab",{name:H,uid:ue})),onOnDragEnd:t(M),onOpenMenu:k[5]||(k[5]=H=>Object.assign(A,H))},{leftIcon:q(()=>{var H;return[((H=I.info)==null?void 0:H.title)==="Drafts"?(C(),U(t(B),{key:0,class:"text-sidebar-c-2 group-hover:hidden",icon:"Scribble",thickness:"2.25"})):(C(),U(t(vt),{key:1,class:"text-sidebar-c-2 size-3.5 min-w-3.5 stroke-2 group-hover:hidden",src:I["x-scalar-icon"]||"interface-content-folder"},null,8,["src"])),h("div",{class:Y({"rotate-90":t(o)[I.uid]})},[R(t(B),{class:"text-c-3 hover:text-c-1 hidden text-sm group-hover:block",icon:"ChevronRight",size:"md"})],2)]}),_:2},1032,["isDraggable","isDroppable","menuItem","uid","onOnDragEnd"])}),128))]))],34)]),button:q(()=>[h("div",{class:Y({"empty-sidebar-item":$.value})},[h("div",xl,[h("div",wl,[R(ot,{art:t(ka),class:"rabbitsit font-bold"},null,8,["art"]),R(ot,{art:t(Ea),class:"rabbitjump absolute left-0 top-0 font-bold"},null,8,["art"])]),k[10]||(k[10]=h("div",{class:"mb-2 mt-2 text-balance text-center text-sm"},[h("b",{class:"font-medium"},"Let's Get Started"),h("p",{class:"mt-2"}," Create request, folder, collection or import from OpenAPI/Postman ")],-1))]),t(r)!=="modal"?(C(),U(t(le),{key:0,class:Y(["mb-1.5 hidden h-fit w-full p-1.5 opacity-0",{"flex opacity-100":$.value}]),onClick:m},{default:q(()=>k[11]||(k[11]=[se(" Import Collection ")])),_:1},8,["class"])):V("",!0),t(r)!=="modal"?(C(),U(Xt,{key:1,click:t(x).commandPalette.emit,hotkey:"K"},{title:q(()=>k[12]||(k[12]=[se(" Add Item ")])),_:1},8,["click"])):V("",!0)],2)]),_:2},[t(r)!=="modal"?{name:"header",fn:q(()=>[]),key:"0"}:void 0]),1032,["class"]),[[st,t(s)]]),t(r)!=="modal"&&A?(C(),U(Ua,{key:0,menuItem:A,onClearDrafts:te,onCloseMenu:k[8]||(k[8]=I=>A.open=!1),onToggleWatchMode:b},null,8,["menuItem"])):V("",!0)],64))}}),El=Ue(kl,[["__scopeId","data-v-8def2cd7"]]),Cl=(e,a=!1)=>{var l,o;const s=Object.fromEntries(e);a&&["Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers"].map(r=>r.toLowerCase()).forEach(r=>delete s[r]);const i=Object.keys(s).find(r=>r.toLowerCase()==="x-scalar-modified-headers"),d=i?((o=(l=s[i])==null?void 0:l.toString().split(", "))==null?void 0:o.map(r=>r.toLowerCase()))??[]:[];return Object.keys(s).forEach(r=>{d.includes(r.toLowerCase())&&delete s[r]}),i&&delete s[i],Object.keys(s).forEach(r=>{const n=/^x-scalar-original-/i;if(n.test(r)){const u=r.replace(n,"");s[r]&&(s[u]=s[r],delete s[r])}}),Object.keys(s).forEach(r=>{const n=Rl(r);r!==n&&s[r]&&(s[n]=s[r],delete s[r])}),Object.fromEntries(Object.entries(s).sort(([r],[n])=>r.localeCompare(n)))},Rl=e=>e.split("-").map(a=>a.charAt(0).toUpperCase()+a.toLowerCase().slice(1)).join("-");function _l(e,a,l){var o,s,i;if(!Bt(e))return{body:void 0,contentType:void 0};if(a.body.activeBody==="formData"&&a.body.formData){const d=a.body.formData.encoding==="form-data"?"multipart/form-data":"application/x-www-form-urlencoded",r=a.body.formData.encoding==="form-data"?new FormData:new URLSearchParams;return a.body.formData.value.forEach(n=>{!n.enabled||!n.key||(n.file&&r instanceof FormData?r.append(n.key,n.file,n.file.name):n.value!==void 0&&r.append(n.key,ne(n.value,l)))}),{body:r,contentType:d}}return a.body.activeBody==="raw"?{body:ne(((o=a.body.raw)==null?void 0:o.value)??"",l),contentType:(s=a.body.raw)==null?void 0:s.encoding}:a.body.activeBody==="binary"?{body:a.body.binary,contentType:(i=a.body.binary)==null?void 0:i.type}:{body:void 0,contentType:void 0}}function ql(e,a){const l={};return e.parameters.headers.forEach(o=>{const s=o.key.trim().toLowerCase();o.enabled&&(s!=="content-type"||o.value!=="multipart/form-data")&&(l[s]=ne(o.value,a))}),l}function Dl(e,a){const l=new URLSearchParams;return e.parameters.query.forEach(o=>{o.enabled&&(o.type==="array"?ne(o.value??"",a).split(","):[ne(o.value??"",a)]).forEach(s=>l.append(o.key,s.trim()))}),l}function Sl(e,a){const l=new Ft(a);return Zt.includes(l.essence)?new TextDecoder(l.parameters.get("charset")).decode(e):new Blob([e],{type:l.essence})}const Il=({environment:e,example:a,globalCookies:l,proxyUrl:o,request:s,securitySchemes:i,selectedSecuritySchemeUids:d=[],server:r,status:n})=>{try{const u=e??{},c=new AbortController,v=a.parameters.path.reduce((L,j)=>(j.enabled&&(L[j.key]=ne(j.value,u)),L),{}),f=ne(r?.url??"",u),D=ne(s.path,v);let x=f||D;if(!x)throw Pe.URL_EMPTY;Object.entries(r?.variables??{}).forEach(([L,j])=>{x=ne(x,{[L]:v[L]||j.default})});const S=Dl(a,u),T=ql(a,u),{body:M}=_l(s.method,a,u),{cookieParams:E}=Qt({example:a,env:u,globalCookies:l,serverUrl:x,proxyUrl:o}),w=d.flat().map(L=>i[L]).filter(De),m=Gt(w,u),p={...Object.entries(m.headers).reduce((L,[j,Q])=>(L[j.toLowerCase()]=Q,L),{}),...T},y=[...E,...m.cookies],A=new URLSearchParams([...S,...m.urlParams]);x=Yt(x,D,A);const z=ne(Jt(y,p.Cookie),u);z&&(ze(o,x)?(console.warn("We’re using a `X-Scalar-Cookie` custom header to the request. The proxy will forward this as a `Cookie` header. We do this to avoid the browser omitting the `Cookie` header for cross-origin requests for security reasons."),p["X-Scalar-Cookie"]=z):(console.warn(`We’re trying to add a Cookie header, but browsers often omit them for cross-origin requests for various security reasons. If it’s not working, that’s probably why. Here are the requirements for it to work:

          - The browser URL must be on the same domain as the server URL.
          - The connection must be made over HTTPS.
          `),p.Cookie=z));const O=new URLSearchParams([["scalar_url",x.toString()]]),N=ze(o,x)?`${o}?${O.toString()}`:x,W=new Request(N,{method:s.method.toUpperCase(),body:M??null,headers:p});return[null,{request:W,sendRequest:async()=>{n?.emit("start");const L=Date.now();try{const j=await fetch(W,{signal:c.signal});n?.emit("stop");const Q=Cl(j.headers,ze(o,x)),re=j.headers.get("content-type")??"text/plain;charset=UTF-8",ae=await j.arrayBuffer(),ye=Sl(ae,re),g="getSetCookie"in j.headers&&typeof j.headers.getSetCookie=="function"?j.headers.getSetCookie():[];return[null,{timestamp:Date.now(),request:a,response:{...j,headers:Q,cookieHeaderKeys:g,data:ye,size:ae.byteLength,duration:Date.now()-L,method:s.method,status:j.status,path:D}}]}catch(j){return n?.emit("abort"),[nt(j,Pe.REQUEST_FAILED),null]}},controller:c}]}catch(u){return console.error(u),n?.emit("abort"),[nt(u),null]}},Ml={class:"flex h-full"},Tl={class:"flex h-full flex-1 flex-col"},Ul=de({__name:"RequestRoot",emits:["newTab"],setup(e){const a=he(),{toast:l}=Be(),{layout:o}=Re(),{activeCollection:s,activeExample:i,activeEnvironment:d,activeRequest:r,activeWorkspace:n,activeServer:u}=fe(),{cookies:c,requestHistory:v,showSidebar:f,securitySchemes:D,events:x}=a,{isSidebarOpen:S}=Ie(),T=Z(),M=Z(new Set),E=K(()=>{var p,y;return(o==="modal"?(p=s.value)==null?void 0:p.selectedSecuritySchemeUids:(y=r.value)==null?void 0:y.selectedSecuritySchemeUids)??[]}),w=async()=>{var p,y,A,z;if(!r.value||!i.value||!s.value)return;M.value=ca(i.value);const O=typeof d.value=="object"?d.value.value:"{}",N=sa.parse(O);N.error&&console.error("INVALID ENVIRONMENT!");const W=N.error||typeof N.data!="object"?{}:N.data??{},L=((p=n.value)==null?void 0:p.cookies.map(g=>c[g]).filter(De))??[],j=((A=(y=s.value)==null?void 0:y.info)==null?void 0:A.title)==="Drafts"?void 0:u.value,[Q,re]=Il({request:r.value,example:i.value,selectedSecuritySchemeUids:E.value,proxyUrl:((z=n.value)==null?void 0:z.proxyUrl)??"",environment:W,globalCookies:L,status:x.requestStatus,securitySchemes:D,server:j});if(Q){l(Q.message,"error");return}T.value=re.controller;const[ae,ye]=await re.sendRequest();ae?l(ae.message,"error"):v.push(JSON.parse(JSON.stringify(ye)))},m=async()=>{var p;return(p=T.value)==null?void 0:p.abort(Pe.REQUEST_ABORTED)};return Te(()=>{x.executeRequest.on(w),x.cancelRequest.on(m)}),wa(),Ge(()=>x.executeRequest.off(w)),me(()=>{var p;return(p=i.value)==null?void 0:p.parameters},()=>{M.value.clear()},{deep:!0}),(p,y)=>(C(),G("div",{class:Y(["bg-b-1 relative z-0 flex h-full flex-1 flex-col overflow-hidden pt-0",{"!mb-0 !mr-0 !border-0":t(o)==="modal"}])},[t(f)?(C(),U(ua,{key:0,modelValue:t(S),"onUpdate:modelValue":y[0]||(y[0]=A=>pt(S)?S.value=A:null),class:Y(["absolute left-3 top-2 z-50",[{hidden:t(S)},{"xl:!flex":!t(S)},{"!flex":t(o)==="modal"}]])},null,8,["modelValue","class"])):V("",!0),h("div",Ml,[t(f)?(C(),U(El,{key:0,onNewTab:y[1]||(y[1]=A=>p.$emit("newTab",A))})):V("",!0),h("div",Tl,[R(t(Kt),{invalidParams:M.value},null,8,["invalidParams"])])])],2))}}),Ql=Ue(Ul,[["__scopeId","data-v-1dfc8727"]]);export{Ql as default};
